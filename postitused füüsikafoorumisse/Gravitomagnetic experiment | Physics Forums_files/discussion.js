var SV=window.SV||{};window.SV.LiveContent=window.SV.LiveContent||{};
(function(d,k,h,m){SV.LiveContent.insertMessages=function(a,b,c,e,g){XF.setupHtmlInsert(a,function(a,l,n){l=b.find(".js-replyNoMessages");l.length&&l.xfFadeUp();a.each(function(){this.tagName&&SV.LiveContent.insertMessage(d(this),b,c,e)});g&&g(a)})};SV.LiveContent.insertMessage=function(a,b,c,e){var g=b.children().first();a.hide();var f=d(k).scrollTop();g.is("form")&&!e?a.insertAfter(g):c?a.insertAfter(c):e?b.append(a):b.prepend(a);a.show();b=a[0].getBoundingClientRect().top;f>=b&&(b=a.outerHeight(),
f&&b&&d(k).scrollTop(f+b));XF.activate(a)};d(h).on("xf:page-load-complete",function(){var a=!0,b=d('.js-quickReply input[name="last_date"]'),c=d(".js-replyNewMessageContainer"),e=c.find(".sticky-container");a=!c.data("reversed-posts");var g=e.length?e:null;c.first().find(".js-newMessagesIndicator").remove();if(XF.Message&&"insertMessage"in XF.Message){var f=XF.Message.insertMessage;XF.Message.insertMessage=function(a,b,d){var c=a.find(".u-anchorTarget").attr("id");c&&b.find("#"+c).length||f(a,b,d)}}SV.LiveContent.discussionLoader=
function(c,e){if(e.html){c=d(".js-replyNewMessageContainer").first();var f=d(e.html),h=f.find(".u-anchorTarget").attr("id");h&&c.find("#"+h).length||(b.length&&e.date>b.val()&&b.val(e.date),c.find(".js-newMessagesIndicator").remove(),d(k).scrollTop(),SV.LiveContent.insertMessages(f,c,g,a))}};d(h).on("live-update.post",SV.LiveContent.discussionLoader);d(h).on("live-update.conversation_message",SV.LiveContent.discussionLoader)})})(jQuery,window,document);
